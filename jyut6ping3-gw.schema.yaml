# Rime schema
# encoding: utf-8
#
# gukwan - èŠéŸ»

# æ­¤çˆ²èŠéŸ»ç²µèªè¼¸å…¥æ³•æ–¹æ¡ˆæ–‡ä»¶
# ç­è§£å¦‚ä½•ä½¿ç”¨èŠéŸ»è«‹é–±è¦½readmeæ–‡ä»¶ï¼Œè©³ç´°è«‹è‡³æœ¬æ–¹æ¡ˆgithubé ï¼š
# https://github.com/HoengSaan/rime-gukwan
# This is a schema file for Gukwan Cantonese Input Method.
# Learn how to use Gukwan in the readme file, available on the project's github page.
# åŸºåº•æ–‡ä»¶ åˆ‡å‹¿ç›´æ¥æ”¹å‹•æˆ–åˆªé™¤

schema:
  schema_id: jyut6ping3-gw
  name: èŠéŸ»ç²µèªä¸‰æ‹¼
  version: "16.0b"
  author:
    - éˆå¸ï¼ˆHoengsaanï¼‰
    - Ayaka Mikazuki <ayaka@mail.shn.hk>
    - LeiMaau <leimaau@qq.com>
    - chaaklau <chaakming@gmail.com>
    - laubonghaudoi <laubonghaudoi@icloud.com>
    - tanxpyox <tanxpyox@gmail.com>
    - William915 <William915@gmail.com>
    - szc126 (@szc126)
    - Bing Jeung <bing@ososo.io>
    - graphemecluster <graphemecluster@gmail.com>
  
  description: |-
    å¯¬å¼éŸ³æ¨™ç‰ˆä¸¦ä¸èƒ½å®Œå…¨å°æ‡‰å¯¦éš›ç™¼éŸ³
    æœ¬æ–¹æ¡ˆæ˜¯å°‡èŠéŸ»åŠŸèƒ½ï¼ˆæ¼¢è‹±æ··æ‰“ã€å„ç¨®åæŸ¥ã€æ—¥æœŸæ™‚é–“è¼¸å…¥ï¼‰ä¸¦å…¥Rimeç²µæ‹¼ï¼ˆjyut6ping3ï½œå»£å·è©±ï¼‰
    ç­è§£å¦‚ä½•ä½¿ç”¨èŠéŸ»è«‹é–±è¦½readmeæ–‡ä»¶ï¼Œè©³ç´°è«‹è‡³æœ¬æ–¹æ¡ˆgithubé ï¼šhttps://github.com/HoengSaan/rime-gukwan
    å¦‚æœ‰å•é¡Œæˆ–å»ºè­°å¯æ–¼ä»¥ä¸Šgithubé ä¸­é–‹Issuesåé¥‹

# ä¾è³´ è«‹ç¢ºä¿é–£ä¸‹å·²å®‰è£ä»¥ä¸‹æ–¹æ¡ˆ
  dependencies:
    - jyut6ping3
    - luna_pinyin
    - cangjie5
    - kunyomi
    - loengfan
    - kanas
    - kaomoji
    - kikwin
    - gukwan-melt-eng

# é–‹é—œ "reset: 0" é»˜èªç¬¬ä¸€é¸é … "reset: 1" é»˜èªç¬¬äºŒé¸é …
switches:
  - name: ascii_mode
    reset: 0
    states: [ ç²µæ–‡, è‹±æ–‡ ]
  - name: full_shape
    reset: 0
    states: [ åŠè§’, å…¨è§’ ]
  - name: simplification
    reset: 0
    states: [ æ·±ç­†, ç°¡ç­† ] 
    abbrev: [ ç¹, ç°¡ ]
  - name: ascii_punct
    reset: 0
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: emoji_cantonese_suggestion
    reset: 0
    states: [ ç„¡âœ–, æœ‰ğŸ”´ ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - affix_segmentor@jyut6ping3            # å»£å·è©±ç²µæ‹¼åæŸ¥
    - affix_segmentor@luna_pinyin           # æ™®é€šè©±æ‹¼éŸ³åæŸ¥
    - affix_segmentor@cangjie5              # å€‰é ¡äº”ä»£åæŸ¥
    - affix_segmentor@kunyomi               # å’Œèªè¨“è®€åæŸ¥
    - affix_segmentor@loengfan              # å»£å·è©±å…©åˆ†åæŸ¥
    - affix_segmentor@kanas                 # å‡åè¼¸å…¥
    - affix_segmentor@kaomoji               # é¡æ–‡å­—è¼¸å…¥
    #- affix_segmentor@kikwin                # å’Œèªè¼¸å…¥
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - script_translator
    - script_translator@jyut6ping3          # å»£å·è©±ç²µæ‹¼åæŸ¥
    - script_translator@luna_pinyin         # æ™®é€šè©±æ‹¼éŸ³åæŸ¥
    - table_translator@cangjie5             # å€‰é ¡äº”ä»£åæŸ¥
    - script_translator@kunyomi             # å’Œèªè¨“è®€åæŸ¥
    - script_translator@loengfan            # å»£å·è©±å…©åˆ†åæŸ¥
    - script_translator@kanas               # å‡åè¼¸å…¥
    - script_translator@kaomoji             # é¡æ–‡å­—è¼¸å…¥
    #- script_translator@kikwin              # å’Œèªè¼¸å…¥
    - table_translator@gukwan-melt-eng      # è‹±èªæ··æ‰“
    - lua_translator@*unicode               # Unicode
    - lua_translator@*calc_translator       # è¨ˆæ•¸æ©Ÿ
    - lua_translator@*number_gukwan         # æ•¸å­—æ•¸é¡é‡‘é¡è˜‡å·ç¢¼
    - lua_translator@*time_gukwan           # æ—¥æœŸæ™‚é–“
  filters:
    #- lua_filter@*is_in_user_dict          # æ¸¬è©¦ç”¨
    - reverse_lookup_filter@reverse_lookup  # åæŸ¥
    - reverse_lookup_filter@special_typing  # è¼¸å…¥
    - lua_filter@*autocap_filter            # è‡ªå‹•å¤§éš
    - simplifier@emoji_cantonese_suggestion # ç¹ªæ–‡å­—è¼¸å…¥
    - simplifier                            # ç°¡åŒ–
    - uniquifier                            # å»é‡

speller:
  alphabet: zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA
  delimiter: " '"
  algebra:
    # å–æ¶ˆä¸‹å…©è¡Œè¨»é‡‹ï¼ˆç§»é™¤ # è™Ÿï¼‰ï¼Œæ”¯æ´ç–‘å½±äº¤æ›¿ï¼š ng- é€š Ã˜-ï¼ŒÃ˜- é€š ng-
    #- derive/^ng([aeiou])/$1/
    #- derive/^([aeiou])/ng$1/

    # å–æ¶ˆä¸‹è¡Œè¨»é‡‹ï¼Œæ”¯æ´æ³¥ä¾†åˆæµï¼š n- ä½µå…¥ l- ï¼Œå¦‚ã€Œä½ ã€è®€è‹¥ã€Œç†ã€
    #- derive/^n(?!g)/l/

    # å–æ¶ˆä¸‹è¡Œè¨»é‡‹ï¼Œæ”¯æ´åœ“å”‡è¼”éŸ³åˆå£éŸ»ç¼ºä½ï¼šéŸ»æ¯ o ä¹‹å‰ gw-, kw- ä½µå…¥ g-, k- ï¼Œå¦‚ã€Œåœ‹ã€è®€è‹¥ã€Œå„ã€ã€ã€Œå»“ã€è®€è‹¥ã€Œç¢ºã€
    #- derive/^(g|k)wo/$1o/

    # å–æ¶ˆä¸‹è¡Œè¨»é‡‹ï¼Œæ”¯æ´ç¨ç«‹é¼»éŸ³éŸ» ng ä½µå…¥ mï¼Œå¦‚ã€Œå³ã€è®€è‹¥ã€Œå””ã€
    #- derive/^ng(?=\d)/m/

    # å–æ¶ˆä¸‹å…©è¡Œè¨»é‡‹ï¼Œæ”¯æ´éŸ»å°¾ -nã€-ng äº¤æ›¿ï¼Œå¦‚ã€Œæ’ç”Ÿã€è®€è‹¥ã€Œç—•èº«ã€
    #- derive/n(?=\d)/ng/
    #- derive/ng(?=\d)/n/

    # å–æ¶ˆä¸‹å…©è¡Œè¨»é‡‹ï¼Œæ”¯æ´éŸ»å°¾ â€“tã€-k äº¤æ›¿ï¼Œå¦‚ã€ŒåŒ—ã€è®€è‹¥ã€Œä¸ã€
    #- derive/t(?=\d)/k/
    #- derive/k(?=\d)/t/

    # å–æ¶ˆä¸‹å…©è¡Œè¨»é‡‹ï¼Œæ”¯æ´éŸ»å°¾ â€“mã€-n äº¤æ›¿ï¼Œå¦‚ã€Œé»ã€è®€ din2
    #- derive/m(?=\d)/n/
    #- derive/n(?=\d)/m/

    # å–æ¶ˆä¸‹å…©è¡Œè¨»é‡‹ï¼Œæ”¯æ´éŸ»å°¾ â€“pã€-t äº¤æ›¿ï¼Œå¦‚ã€Œç¢Ÿã€è®€ dit2
    #- derive/p(?=\d)/t/
    #- derive/t(?=\d)/p/

    - derive/eoi(?=\d)/eoy/                 # ç²µæ‹¼(eoy->eoi)
    #- derive/^z/dz/                        # æ•™é™¢æ‹¼éŸ³
    #- derive/^c/ts/                        # æ•™é™¢æ‹¼éŸ³
    #- derive/y(?=\d)/z/                    # è‹±è¯æ‹¼æ³•(y->z)
    #- derive/y(?=\d)/ii/                   # æ“´å±•ç²µæ‹¼(y->ii)

    #å…¨æ‹¼
    #- derive/(g|k|h|ng)u/$1wu/             # å…¨æ‹¼(g|k|h[w]u)
    #- derive/(g|k|h|ng)y/$1wy/             # å…¨æ‹¼(g|k|h[w]y)
    
    #ç°¡æ‹¼ï¼ˆä¸‰æ‹¼ï¼‰
    - derive/^kw/q/                         # ç°¡æ‹¼(kw->q)
    #- derive/^gw/q/                        # ç°¡æ‹¼(gw->q)
    #- derive/^kw/x/                        # ç°¡æ‹¼(kw->q)
    - derive/^gw/x/                         # ç°¡æ‹¼(gw->q)
    - derive/^nj/r/                         # ç°¡æ‹¼(nj->r)
    - derive/^ng([aeiouy])/r$1/             # ç°¡æ‹¼(ng->r)
    - derive/([aeiouy])ng/$1r/              # ç°¡æ‹¼(ng->r)

    - derive/aa(?=\d)/a/                    # ç°¡æ‹¼(aa->a)
    - derive/aa(i|u|m|n|ng|p|t|k|r)/r$1/    # ç°¡æ‹¼(aa->r)
    - derive/^jy?([aeiou])/y$1/             # ç°¡æ‹¼(jy->y)
    - derive/yu(?!ng|k)/y/                  # ç°¡æ‹¼(yu->y)
    - derive/oe(ng|k|r)/e$1/                # ç°¡æ‹¼(oe->e)
    - derive/eo(n|t|i|y)/u$1/               # ç°¡æ‹¼(eo->u)
    #- derive/oo(i|y)/u$1/                  # ç°¡æ‹¼(oo->u)

    #ç°¡æ‹¼
    - derive/^wu/u/                         # ç°¡æ‹¼(wu->u)
    - derive/^nji/nj/                       # ç°¡æ‹¼(ji->j)
    - derive/^ji/j/                         # ç°¡æ‹¼(ji->j)

    #æ¨¡ç³Š
    - derive/eo/oe/                         # æ¨¡ç³Š(eo/oe)
    - derive/oe/eo/                         # æ¨¡ç³Š(eo/oe)

    #é¦–å­—æ¯å‡ºå­—

    - abbrev/^([a-z]).+$/$1/

    #è²èª¿ï¼ˆå‹¿å‹•ï¼‰

    - derive/\d//                           # å¿½ç•¥è²èª¿
    - xform/1/v/                            # é™°å¹³
    - xform/4/vv/                           # é™½å¹³
    - xform/2/x/                            # é™°ä¸Š
    - xform/5/xx/                           # é™½ä¸Š
    - xform/3/q/                            # é™°å»
    - xform/6/qq/                           # é™½å»

translator:
  dictionary: jyut6ping3
  prism: jyut6ping3-gw
  spelling_hints: 9
  initial_quality: 1.2
  preedit_format:
    - xform/([aeiouymngptk])vv/${1}4/
    - xform/([aeiouymngptk])xx/${1}5/
    - xform/([aeiouymngptk])qq/${1}6/
    - xform/([aeiouymngptk])v/${1}1/
    - xform/([aeiouymngptk])x/${1}2/
    - xform/([aeiouymngptk])q/${1}3/

jyut6ping3:
  tag: jyut6ping3
  dictionary: jyut6ping3
  enable_user_dict: false
  prefix: "`"
  suffix: ";"
  tips: ã€”ç²µæ‹¼ã€•
  preedit_format:
    - xform/([aeiouymngptk])vv/${1}4/
    - xform/([aeiouymngptk])xx/${1}5/
    - xform/([aeiouymngptk])qq/${1}6/
    - xform/([aeiouymngptk])v/${1}1/
    - xform/([aeiouymngptk])x/${1}2/
    - xform/([aeiouymngptk])q/${1}3/

luna_pinyin:
  tag: luna_pinyin
  dictionary: luna_pinyin
  enable_user_dict: false
  prefix: "`P"
  suffix: ";"
  tips: ã€”æ™®æ‹¼ã€•
  preedit_format:
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/

cangjie5:
  tag: cangjie5
  dictionary: cangjie5
  enable_user_dict: false
  prefix: "`C"
  suffix: ";"
  tips: ã€”å€‰é ¡ã€•
  preedit_format:
    - 'xform/^([a-z]*)$/$1\tï¼ˆ\U$1\Eï¼‰/'
    - "xlit|ABCDEFGHIJKLMNOPQRSTUVWXYZ|æ—¥æœˆé‡‘æœ¨æ°´ç«åœŸç«¹æˆˆåå¤§ä¸­ä¸€å¼“äººå¿ƒæ‰‹å£å°¸å»¿å±±å¥³ç”°é›£åœç¬¦|"
  comment_format:
    - "xlit|abcdefghijklmnopqrstuvwxyz~|æ—¥æœˆé‡‘æœ¨æ°´ç«åœŸç«¹æˆˆåå¤§ä¸­ä¸€å¼“äººå¿ƒæ‰‹å£å°¸å»¿å±±å¥³ç”°é›£åœç¬¦ï½|"
  disable_user_dict_for_patterns:
    - "^z.*$"
    - "^yyy.*$"

kunyomi:
  tag: kunyomi
  dictionary: kunyomi
  enable_user_dict: false
  prefix: "`F"
  suffix: ";"
  tips: ã€”å’Œè¨“ã€•

loengfan:
  tag: loengfan
  dictionary: loengfan
  enable_user_dict: false
  prefix: "`L"
  suffix: ";"
  tips: ã€”å…©åˆ†ã€•

reverse_lookup:
  tags: [ jyut6ping3, luna_pinyin, cangjie5, kunyomi, loengfan ]
  overwrite_comment: false
  dictionary: gukwan

kanas:
  tag: kanas
  dictionary: kanas
  enable_user_dict: false
  prefix: "`G"
  suffix: ";"
  tips: ã€”å‡åã€•

kaomoji:
  tag: kaomoji
  dictionary: kaomoji
  enable_user_dict: false
  prefix: "`K"
  suffix: ";"
  tips: ã€”é¡”æ–‡å­—ã€•

kikwin:
  tag: kikwin
  dictionary: kikwin
  enable_user_dict: false
  prefix: "`R"
  suffix: ";"
  tips: ã€”å’Œæ–‡ã€•

special_typing: 
  tags: [ kanas, kaomoji, kikwin ]
  overwrite_comment: false

gukwan-melt-eng:
  dictionary: gukwan-melt-eng 
  enable_sentence: false
  enable_user_dict: false
  initial_quality: 1.1
  comment_format:
    - xform/.*//

emoji_cantonese_suggestion:
  opencc_config: emoji_cantonese.json
  option_name: emoji_cantonese_suggestion
  tips: all
  inherit_comment: true

punctuator:
  import_preset: symbols-gukwan

key_binder:
  import_preset: default

# åŠŸèƒ½
recognizer:
  import_preset: default
  patterns:
    punct: "^/([0-9]0?|[a-z]+)$"
    jyut6ping3: "^`[a-z']*;?$"
    luna_pinyin: "^`P[a-z']*;?$"
    cangjie5: "^`C[a-z]*;?$"
    kunyomi: "^`F[a-z']*;?$"
    loengfan: "^`L[a-z']*;?$"
    kanas: "^`G[a-zA-Z-]*;?$"
    kaomoji: "^`K[a-z-]*;?$"
    kikwin: "^`R[a-z-]*;?$"
    unicode: "^U[a-f0-9]+"
    number: "^S[0-9]+[.]?[0-9]*"
    calculator: "^cC.+"
    gregorian_to_lunar: "^N[0-9]{1,8}"

## æ¸¬è©¦ç”¨
is_in_user_dict: false